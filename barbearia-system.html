<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Agendamentos - Barbearia</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: #fff;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(243, 156, 18, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(142, 68, 173, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        html, body {
            height: 100%;
        }

        body {
            display: flex;
            flex-direction: column;
        }

        #app {
            flex: 1 0 auto;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 20px 60px;
            position: relative;
            z-index: 1;
            width: 100%;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 25px 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: #000;
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4);
        }

        .btn-primary:hover {
            box-shadow: 0 6px 25px rgba(243, 156, 18, 0.6);
            transform: translateY(-2px);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: #fff;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
        }

        .btn-danger:hover {
            box-shadow: 0 6px 25px rgba(231, 76, 60, 0.6);
        }

        /* Auth Forms */
        .auth-container {
            max-width: 450px;
            margin: 50px auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            padding: 50px 40px;
            border-radius: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .auth-title {
            text-align: center;
            margin-bottom: 35px;
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 36px;
            font-weight: 800;
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: #e0e0e0;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 15px 18px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #f39c12;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(243, 156, 18, 0.1);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
            color: #bbb;
        }

        .auth-switch a {
            color: #f39c12;
            text-decoration: none;
            cursor: pointer;
        }

        .auth-switch a:hover {
            text-decoration: underline;
        }

        /* Dashboard */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #f39c12 0%, #e67e22 100%);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(243, 156, 18, 0.2);
        }

        .card h3 {
            color: #f39c12;
            margin-bottom: 15px;
            font-size: 18px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-value {
            font-size: 42px;
            font-weight: 800;
            margin: 15px 0;
            background: linear-gradient(135deg, #fff 0%, #f39c12 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Booking Section */
        .booking-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 35px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 0.6s ease;
        }

        .section-title {
            color: #fff;
            margin-bottom: 30px;
            font-size: 26px;
            font-weight: 700;
            position: relative;
            padding-bottom: 15px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, #f39c12 0%, #e67e22 100%);
            border-radius: 2px;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .service-card {
            background: rgba(255, 255, 255, 0.03);
            padding: 25px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(243, 156, 18, 0.1) 0%, rgba(230, 126, 34, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .service-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: #f39c12;
            box-shadow: 0 15px 40px rgba(243, 156, 18, 0.3);
        }

        .service-card:hover::before {
            opacity: 1;
        }

        .service-card.selected {
            border-color: #f39c12;
            background: rgba(243, 156, 18, 0.15);
            box-shadow: 0 8px 25px rgba(243, 156, 18, 0.4);
        }

        .service-card.selected::before {
            opacity: 1;
        }

        .service-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
        }

        .service-price {
            color: #f39c12;
            font-size: 28px;
            font-weight: 800;
            position: relative;
            z-index: 1;
        }

        .service-duration {
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            margin-top: 8px;
            position: relative;
            z-index: 1;
        }

        /* Time Slots */
        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }

        .time-slot {
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            font-size: 15px;
        }

        .time-slot:hover:not(.disabled) {
            background: rgba(243, 156, 18, 0.2);
            border-color: #f39c12;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);
        }

        .time-slot.selected {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: #000;
            border-color: #f39c12;
            box-shadow: 0 5px 20px rgba(243, 156, 18, 0.5);
            transform: scale(1.05);
        }

        .time-slot.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            background: rgba(255, 255, 255, 0.02);
        }

        /* Appointments Table */
        .table-container {
            overflow-x: auto;
            border-radius: 12px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            overflow: hidden;
        }

        th, td {
            padding: 18px 15px;
            text-align: left;
        }

        th {
            background: rgba(243, 156, 18, 0.15);
            color: #f39c12;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        tbody tr {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.2s ease;
        }

        tbody tr:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: scale(1.01);
        }

        tbody tr:last-child {
            border-bottom: none;
        }

        .status {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
        }

        .status-pending {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: #000;
            box-shadow: 0 2px 8px rgba(243, 156, 18, 0.3);
        }

        .status-confirmed {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: #fff;
            box-shadow: 0 2px 8px rgba(39, 174, 96, 0.3);
        }

        .status-cancelled {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: #fff;
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
        }

        .status-completed {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: #fff;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
        }

        /* Admin Panel */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(243, 156, 18, 0.2) 0%, rgba(230, 126, 34, 0.2) 100%);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid rgba(243, 156, 18, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-30%, -30%); }
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(243, 156, 18, 0.4);
            border-color: #f39c12;
        }

        .stat-value {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #fff 0%, #f39c12 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 1;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            z-index: 1;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: #fff;
            box-shadow: 0 2px 10px rgba(39, 174, 96, 0.3);
        }

        .btn-success:hover {
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.5);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: #000;
            box-shadow: 0 2px 10px rgba(243, 156, 18, 0.3);
        }

        .btn-warning:hover {
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.5);
        }

        .btn-info {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: #fff;
            box-shadow: 0 2px 10px rgba(52, 152, 219, 0.3);
        }

        .btn-info:hover {
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.5);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 25px;
            background: rgba(255, 255, 255, 0.03);
            padding: 8px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab {
            padding: 12px 28px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            border-radius: 10px;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab:hover {
            color: #f39c12;
            background: rgba(243, 156, 18, 0.1);
        }

        .tab.active {
            color: #000;
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            padding: 40px;
            border-radius: 25px;
            max-width: 550px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .close-modal {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #fff;
            font-size: 28px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: rgba(231, 76, 60, 0.8);
            transform: rotate(90deg);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                text-align: center;
            }

            .dashboard {
                grid-template-columns: 1fr;
            }

            .services-grid {
                grid-template-columns: 1fr;
            }

            .time-slots {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }

            table {
                font-size: 12px;
            }

            th, td {
                padding: 10px 5px;
            }

            .stat-card {
                padding: 20px;
            }

            .stat-value {
                font-size: 36px;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                min-width: 120px;
            }
        }

        .hidden {
            display: none !important;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.5);
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* Footer */
        .footer {
            width: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 40px 20px 20px;
            margin-top: auto;
            z-index: 999;
            flex-shrink: 0;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            text-align: center;
        }

        .footer-section h4 {
            color: #f39c12;
            margin-bottom: 15px;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .footer-section p,
        .footer-section a {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            line-height: 1.8;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: #f39c12;
        }

        .footer-bottom {
            max-width: 1200px;
            margin: 20px auto 0;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 13px;
        }

        .social-icons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 10px;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .social-icon:hover {
            background: #f39c12;
            transform: translateY(-3px);
        }

        /* Payment Method Selector */
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .payment-method {
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .payment-method:hover {
            background: rgba(243, 156, 18, 0.1);
            border-color: #f39c12;
            transform: translateY(-2px);
        }

        .payment-method.selected {
            background: rgba(243, 156, 18, 0.2);
            border-color: #f39c12;
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);
        }

        .payment-icon {
            font-size: 32px;
        }

        .payment-label {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* Rating System */
        .rating-container {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            margin-top: 15px;
        }

        .stars {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }

        .star {
            font-size: 40px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: rgba(255, 255, 255, 0.2);
        }

        .star:hover,
        .star.active {
            color: #f39c12;
            transform: scale(1.2);
        }

        .rating-comment {
            margin-top: 15px;
        }

        .review-display {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            border-left: 3px solid #f39c12;
        }

        .review-stars {
            color: #f39c12;
            font-size: 18px;
            margin-bottom: 8px;
        }

        .review-comment {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            line-height: 1.6;
        }

        .review-date {
            color: rgba(255, 255, 255, 0.4);
            font-size: 12px;
            margin-top: 8px;
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            margin-left: 8px;
        }

        .badge-new {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Blocked Dates */
        .blocked-date-item {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .blocked-date-item:hover {
            background: rgba(231, 76, 60, 0.15);
            border-color: rgba(231, 76, 60, 0.5);
        }

        .blocked-date-text {
            font-size: 16px;
            font-weight: 600;
        }

        .empty-blocked-dates {
            text-align: center;
            padding: 40px;
            color: rgba(255, 255, 255, 0.4);
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container" id="app">
        <!-- Login Screen -->
        <div id="loginScreen" class="auth-container">
            <h1 class="auth-title">üßî Barbearia Pro</h1>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="loginEmail" placeholder="seu@email.com">
            </div>
            <div class="form-group">
                <label>Senha</label>
                <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="login()">Entrar</button>
            <div class="auth-switch">
                N√£o tem conta? <a onclick="showRegister()">Cadastre-se</a>
            </div>
        </div>

        <!-- Register Screen -->
        <div id="registerScreen" class="auth-container hidden">
            <h1 class="auth-title">üìù Cadastro</h1>
            <div class="form-group">
                <label>Nome Completo</label>
                <input type="text" id="registerName" placeholder="Jo√£o Silva">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="registerEmail" placeholder="seu@email.com">
            </div>
            <div class="form-group">
                <label>Telefone</label>
                <input type="tel" id="registerPhone" placeholder="(11) 99999-9999">
            </div>
            <div class="form-group">
                <label>Senha</label>
                <input type="password" id="registerPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="register()">Cadastrar</button>
            <div class="auth-switch">
                J√° tem conta? <a onclick="showLogin()">Fa√ßa login</a>
            </div>
        </div>

        <!-- Client Dashboard -->
        <div id="clientDashboard" class="hidden">
            <div class="header">
                <div class="logo">üßî Barbearia Pro</div>
                <div class="user-info">
                    <span id="userName">Usu√°rio</span>
                    <button class="btn btn-secondary" onclick="logout()">Sair</button>
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showClientTab('booking')">Novo Agendamento</button>
                <button class="tab" onclick="showClientTab('appointments')">Meus Agendamentos</button>
            </div>

            <!-- Booking Tab -->
            <div id="bookingTab">
                <div class="booking-section">
                    <h2 class="section-title">Escolha o Servi√ßo</h2>
                    <div class="services-grid" id="servicesGrid"></div>
                </div>

                <div class="booking-section">
                    <h2 class="section-title">Escolha a Data</h2>
                    <div class="form-group">
                        <input type="date" id="bookingDate" onchange="loadTimeSlots()">
                    </div>
                </div>

                <div class="booking-section">
                    <h2 class="section-title">Escolha o Hor√°rio</h2>
                    <div class="time-slots" id="timeSlots"></div>
                </div>

                <div class="booking-section">
                    <h2 class="section-title">Observa√ß√µes (Opcional)</h2>
                    <div class="form-group">
                        <textarea id="bookingNotes" rows="3" placeholder="Alguma prefer√™ncia ou observa√ß√£o..."></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="createBooking()">Confirmar Agendamento</button>
                </div>
            </div>

            <!-- Appointments Tab -->
            <div id="appointmentsTab" class="hidden">
                <div class="booking-section">
                    <h2 class="section-title">Meus Agendamentos</h2>
                    <div class="table-container">
                        <table id="clientAppointmentsTable">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Hor√°rio</th>
                                    <th>Servi√ßo</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="adminDashboard" class="hidden">
            <div class="header">
                <div class="logo">üë®‚Äçüíº Painel Admin</div>
                <div class="user-info">
                    <span id="adminName">Admin</span>
                    <button class="btn btn-secondary" onclick="logout()">Sair</button>
                </div>
            </div>

            <div class="admin-stats" id="adminStats">
                <div class="stat-card">
                    <div class="stat-value" id="totalClients">0</div>
                    <div class="stat-label">Total de Clientes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="todayAppointments">0</div>
                    <div class="stat-label">Agendamentos Hoje</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="pendingAppointments">0</div>
                    <div class="stat-label">Pendentes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalRevenue">R$ 0</div>
                    <div class="stat-label">Receita do M√™s</div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showAdminTab('appointments')">Todos Agendamentos</button>
                <button class="tab" onclick="showAdminTab('clients')">Clientes</button>
                <button class="tab" onclick="showAdminTab('services')">Servi√ßos</button>
                <button class="tab" onclick="showAdminTab('ratings')">Avalia√ß√µes <span class="badge badge-new" id="ratingsCount">0</span></button>
                <button class="tab" onclick="showAdminTab('settings')">‚öôÔ∏è Configura√ß√µes</button>
            </div>

            <!-- Admin Appointments Tab -->
            <div id="adminAppointmentsTab">
                <div class="booking-section">
                    <h2 class="section-title">Gerenciar Agendamentos</h2>
                    <div class="table-container">
                        <table id="adminAppointmentsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Data</th>
                                    <th>Hor√°rio</th>
                                    <th>Servi√ßo</th>
                                    <th>Valor</th>
                                    <th>Status</th>
                                    <th>Avalia√ß√£o</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Admin Clients Tab -->
            <div id="adminClientsTab" class="hidden">
                <div class="booking-section">
                    <h2 class="section-title">Lista de Clientes</h2>
                    <div class="table-container">
                        <table id="adminClientsTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Email</th>
                                    <th>Telefone</th>
                                    <th>Total de Agendamentos</th>
                                    <th>√öltima Visita</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Admin Services Tab -->
            <div id="adminServicesTab" class="hidden">
                <div class="booking-section">
                    <h2 class="section-title">Gerenciar Servi√ßos</h2>
                    <button class="btn btn-primary" onclick="showAddServiceModal()" style="margin-bottom: 20px;">+ Adicionar Servi√ßo</button>
                    <div class="table-container">
                        <table id="adminServicesTable">
                            <thead>
                                <tr>
                                    <th>Servi√ßo</th>
                                    <th>Dura√ß√£o</th>
                                    <th>Pre√ßo</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Admin Ratings Tab -->
            <div id="adminRatingsTab" class="hidden">
                <div class="booking-section">
                    <h2 class="section-title">Avalia√ß√µes dos Clientes</h2>
                    <div id="ratingsContainer"></div>
                </div>
            </div>

            <!-- Admin Settings Tab -->
            <div id="adminSettingsTab" class="hidden">
                <div class="booking-section">
                    <h2 class="section-title">‚è∞ Hor√°rios de Funcionamento</h2>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 20px;">Configure os hor√°rios dispon√≠veis para agendamento</p>
                    
                    <div class="form-group">
                        <label>Hor√°rios Dispon√≠veis (separados por v√≠rgula)</label>
                        <textarea id="availableTimes" rows="4" placeholder="Ex: 09:00, 09:30, 10:00, 10:30, 11:00..."></textarea>
                        <small style="color: rgba(255,255,255,0.5); display: block; margin-top: 8px;">
                            Digite os hor√°rios no formato HH:MM separados por v√≠rgula
                        </small>
                    </div>
                    <button class="btn btn-primary" onclick="saveAvailableTimes()">üíæ Salvar Hor√°rios</button>
                </div>

                <div class="booking-section">
                    <h2 class="section-title">üìÖ Dias de Aus√™ncia</h2>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 20px;">Bloqueie datas em que n√£o haver√° atendimento</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr auto; gap: 15px; margin-bottom: 20px;">
                        <div class="form-group" style="margin: 0;">
                            <label>Selecione a Data</label>
                            <input type="date" id="blockedDate">
                        </div>
                        <div style="display: flex; align-items: flex-end;">
                            <button class="btn btn-danger" onclick="addBlockedDate()">üö´ Bloquear Data</button>
                        </div>
                    </div>

                    <div id="blockedDatesList">
                        <h3 style="color: #f39c12; font-size: 16px; margin-bottom: 15px;">Datas Bloqueadas:</h3>
                        <div id="blockedDatesContainer"></div>
                    </div>
                </div>

                <div class="booking-section">
                    <h2 class="section-title">üîß Configura√ß√µes Gerais</h2>
                    
                    <div class="form-group">
                        <label>Nome da Barbearia</label>
                        <input type="text" id="barbershopName" placeholder="Barbearia Pro">
                    </div>

                    <div class="form-group">
                        <label>Telefone</label>
                        <input type="tel" id="barbershopPhone" placeholder="(11) 99999-9999">
                    </div>

                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="barbershopEmail" placeholder="contato@barbearia.com">
                    </div>

                    <div class="form-group">
                        <label>Endere√ßo</label>
                        <input type="text" id="barbershopAddress" placeholder="Rua Exemplo, 123 - Centro">
                    </div>

                    <button class="btn btn-primary" onclick="saveGeneralSettings()">üíæ Salvar Configura√ß√µes</button>
                </div>
            </div>
        </div>

        <!-- Payment Modal -->
        <div id="paymentModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="section-title" style="margin: 0;">Forma de Pagamento</h2>
                    <button class="close-modal" onclick="closePaymentModal()">&times;</button>
                </div>
                <div id="paymentInfo" style="margin-bottom: 20px;">
                    <p style="color: rgba(255,255,255,0.7); font-size: 14px;">Cliente: <strong id="paymentClientName"></strong></p>
                    <p style="color: rgba(255,255,255,0.7); font-size: 14px;">Servi√ßo: <strong id="paymentServiceName"></strong></p>
                    <p style="color: #f39c12; font-size: 24px; font-weight: 700; margin-top: 10px;">Valor: R$ <span id="paymentValue"></span></p>
                </div>
                <div class="form-group">
                    <label>Selecione a Forma de Pagamento</label>
                    <div class="payment-methods" id="paymentMethods">
                        <div class="payment-method" data-method="dinheiro" onclick="selectPaymentMethod('dinheiro')">
                            <div class="payment-icon">üíµ</div>
                            <div class="payment-label">Dinheiro</div>
                        </div>
                        <div class="payment-method" data-method="pix" onclick="selectPaymentMethod('pix')">
                            <div class="payment-icon">üì±</div>
                            <div class="payment-label">PIX</div>
                        </div>
                        <div class="payment-method" data-method="debito" onclick="selectPaymentMethod('debito')">
                            <div class="payment-icon">üí≥</div>
                            <div class="payment-label">D√©bito</div>
                        </div>
                        <div class="payment-method" data-method="credito" onclick="selectPaymentMethod('credito')">
                            <div class="payment-icon">üí≥</div>
                            <div class="payment-label">Cr√©dito</div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="completePayment()">Finalizar Atendimento</button>
            </div>
        </div>

        <!-- Rating Modal -->
        <div id="ratingModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="section-title" style="margin: 0;">Avaliar Atendimento</h2>
                    <button class="close-modal" onclick="closeRatingModal()">&times;</button>
                </div>
                <div class="rating-container">
                    <p style="margin-bottom: 20px; color: rgba(255,255,255,0.8);">Como foi sua experi√™ncia?</p>
                    <div class="stars" id="ratingStars">
                        <span class="star" data-rating="1" onclick="selectRating(1)">‚òÖ</span>
                        <span class="star" data-rating="2" onclick="selectRating(2)">‚òÖ</span>
                        <span class="star" data-rating="3" onclick="selectRating(3)">‚òÖ</span>
                        <span class="star" data-rating="4" onclick="selectRating(4)">‚òÖ</span>
                        <span class="star" data-rating="5" onclick="selectRating(5)">‚òÖ</span>
                    </div>
                    <div class="form-group rating-comment">
                        <label>Coment√°rio (Opcional)</label>
                        <textarea id="ratingComment" rows="3" placeholder="Conte-nos sobre sua experi√™ncia..."></textarea>
                    </div>
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="submitRating()">Enviar Avalia√ß√£o</button>
                <button class="btn btn-secondary" style="width: 100%; margin-top: 10px;" onclick="skipRating()">Pular</button>
            </div>
        </div>

        <!-- Add Service Modal -->
        <div id="serviceModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="section-title" style="margin: 0;">Novo Servi√ßo</h2>
                    <button class="close-modal" onclick="closeServiceModal()">&times;</button>
                </div>
                <div class="form-group">
                    <label>Nome do Servi√ßo</label>
                    <input type="text" id="serviceName" placeholder="Ex: Corte Degrad√™">
                </div>
                <div class="form-group">
                    <label>Dura√ß√£o (minutos)</label>
                    <input type="number" id="serviceDuration" placeholder="Ex: 45">
                </div>
                <div class="form-group">
                    <label>Pre√ßo (R$)</label>
                    <input type="number" id="servicePrice" placeholder="Ex: 45.00" step="0.01">
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="addService()">Salvar Servi√ßo</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>üßî Barbearia Pro</h4>
                <p>A melhor barbearia da cidade</p>
                <p>Atendimento de segunda a s√°bado</p>
                <p>09:00 √†s 19:00</p>
            </div>
            <div class="footer-section">
                <h4>Contato</h4>
                <p>üìû (11) 99999-9999</p>
                <p>üìß <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a6c5c9c8d2c7d2c9e6c4c7d4c4c3c7d4cfc7d6d4c988c5c9cb">[email&#160;protected]</a></p>
                <p>üìç Rua Exemplo, 123 - Centro</p>
                <p>S√£o Paulo, SP</p>
            </div>
            <div class="footer-section">
                <h4>Redes Sociais</h4>
                <div class="social-icons">
                    <a href="#" class="social-icon">üìò</a>
                    <a href="#" class="social-icon">üì∑</a>
                    <a href="#" class="social-icon">üê¶</a>
                    <a href="#" class="social-icon">üíº</a>
                </div>
                <p style="margin-top: 15px;">Siga-nos e fique por dentro das novidades!</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Barbearia Pro. Todos os direitos reservados.</p>
            <p>Desenvolvido por <strong style="color: #f39c12;">Felipe Andrade</strong> com ‚ù§Ô∏è</p>
        </div>
    </footer>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Database simulation with localStorage
        const DB = {
            users: JSON.parse(localStorage.getItem('users') || '[]'),
            appointments: JSON.parse(localStorage.getItem('appointments') || '[]'),
            services: JSON.parse(localStorage.getItem('services') || '[]'),
            ratings: JSON.parse(localStorage.getItem('ratings') || '[]'),
            settings: JSON.parse(localStorage.getItem('settings') || 'null'),
            blockedDates: JSON.parse(localStorage.getItem('blockedDates') || '[]'),
            currentUser: JSON.parse(localStorage.getItem('currentUser') || 'null'),
            
            save() {
                localStorage.setItem('users', JSON.stringify(this.users));
                localStorage.setItem('appointments', JSON.stringify(this.appointments));
                localStorage.setItem('services', JSON.stringify(this.services));
                localStorage.setItem('ratings', JSON.stringify(this.ratings));
                localStorage.setItem('settings', JSON.stringify(this.settings));
                localStorage.setItem('blockedDates', JSON.stringify(this.blockedDates));
                localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
            },

            init() {
                // Create admin user if not exists
                if (!this.users.find(u => u.email === 'admin@barbearia.com')) {
                    this.users.push({
                        id: 1,
                        name: 'Administrador',
                        email: 'admin@barbearia.com',
                        password: 'admin123',
                        phone: '(11) 99999-9999',
                        role: 'admin',
                        createdAt: new Date().toISOString()
                    });
                }

                // Create default services if empty
                if (this.services.length === 0) {
                    this.services = [
                        { id: 1, name: 'Corte Simples', duration: 30, price: 35.00 },
                        { id: 2, name: 'Corte + Barba', duration: 45, price: 55.00 },
                        { id: 3, name: 'Barba', duration: 25, price: 25.00 },
                        { id: 4, name: 'Corte Degrad√™', duration: 40, price: 45.00 },
                        { id: 5, name: 'Hidrata√ß√£o Capilar', duration: 60, price: 70.00 },
                        { id: 6, name: 'Sobrancelha', duration: 15, price: 15.00 }
                    ];
                }

                // Initialize default settings
                if (!this.settings) {
                    this.settings = {
                        availableTimes: [
                            '09:00', '09:30', '10:00', '10:30', '11:00', '11:30',
                            '14:00', '14:30', '15:00', '15:30', '16:00', '16:30',
                            '17:00', '17:30', '18:00', '18:30'
                        ],
                        barbershopName: 'Barbearia Pro',
                        phone: '(11) 99999-9999',
                        email: 'contato@barbeariapro.com',
                        address: 'Rua Exemplo, 123 - Centro, S√£o Paulo, SP'
                    };
                }

                this.save();
            }
        };

        // Initialize DB
        DB.init();

        // App State
        let selectedService = null;
        let selectedDate = null;
        let selectedTime = null;
        let selectedPaymentMethod = null;
        let currentAppointmentForPayment = null;
        let currentAppointmentForRating = null;
        let selectedRating = 0;

        // Initialize app
        window.onload = function() {
            if (DB.currentUser) {
                if (DB.currentUser.role === 'admin') {
                    showAdminDashboard();
                } else {
                    showClientDashboard();
                }
            } else {
                showLogin();
            }
        };

        // Auth Functions
        function showLogin() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('registerScreen').classList.add('hidden');
        }

        function showRegister() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('registerScreen').classList.remove('hidden');
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const user = DB.users.find(u => u.email === email && u.password === password);

            if (user) {
                DB.currentUser = user;
                DB.save();
                
                if (user.role === 'admin') {
                    showAdminDashboard();
                } else {
                    showClientDashboard();
                }
            } else {
                alert('Email ou senha incorretos!');
            }
        }

        function register() {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const password = document.getElementById('registerPassword').value;

            if (!name || !email || !phone || !password) {
                alert('Preencha todos os campos!');
                return;
            }

            if (DB.users.find(u => u.email === email)) {
                alert('Email j√° cadastrado!');
                return;
            }

            const newUser = {
                id: DB.users.length + 1,
                name,
                email,
                phone,
                password,
                role: 'client',
                createdAt: new Date().toISOString()
            };

            DB.users.push(newUser);
            DB.currentUser = newUser;
            DB.save();

            showClientDashboard();
        }

        function logout() {
            DB.currentUser = null;
            DB.save();
            location.reload();
        }

        // Client Dashboard
        function showClientDashboard() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('registerScreen').classList.add('hidden');
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('clientDashboard').classList.remove('hidden');
            document.getElementById('userName').textContent = DB.currentUser.name;
            
            loadServices();
            setMinDate();
        }

        function showClientTab(tab) {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            if (tab === 'booking') {
                document.getElementById('bookingTab').classList.remove('hidden');
                document.getElementById('appointmentsTab').classList.add('hidden');
            } else {
                document.getElementById('bookingTab').classList.add('hidden');
                document.getElementById('appointmentsTab').classList.remove('hidden');
                loadClientAppointments();
            }
        }

        function loadServices() {
            const grid = document.getElementById('servicesGrid');
            grid.innerHTML = '';

            DB.services.forEach(service => {
                const card = document.createElement('div');
                card.className = 'service-card';
                card.onclick = () => selectService(service.id);
                card.innerHTML = `
                    <div class="service-name">${service.name}</div>
                    <div class="service-price">R$ ${service.price.toFixed(2)}</div>
                    <div class="service-duration">${service.duration} minutos</div>
                `;
                grid.appendChild(card);
            });
        }

        function selectService(serviceId) {
            selectedService = serviceId;
            document.querySelectorAll('.service-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.service-card').classList.add('selected');
        }

        function setMinDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('bookingDate').min = today;
            document.getElementById('bookingDate').value = today;
            selectedDate = today;
            loadTimeSlots();
        }

        function loadTimeSlots() {
            selectedDate = document.getElementById('bookingDate').value;
            const container = document.getElementById('timeSlots');
            container.innerHTML = '';

            // Verificar se a data est√° bloqueada
            const isDateBlocked = DB.blockedDates.some(blocked => blocked === selectedDate);
            
            if (isDateBlocked) {
                container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üö´</div><p>Desculpe, n√£o h√° atendimento nesta data.</p></div>';
                return;
            }

            const times = DB.settings?.availableTimes || [
                '09:00', '09:30', '10:00', '10:30', '11:00', '11:30',
                '14:00', '14:30', '15:00', '15:30', '16:00', '16:30',
                '17:00', '17:30', '18:00', '18:30'
            ];

            times.forEach(time => {
                const isBooked = DB.appointments.some(apt => 
                    apt.date === selectedDate && 
                    apt.time === time && 
                    apt.status !== 'cancelled'
                );

                const slot = document.createElement('div');
                slot.className = `time-slot ${isBooked ? 'disabled' : ''}`;
                slot.textContent = time;
                
                if (!isBooked) {
                    slot.onclick = () => selectTime(time);
                }
                
                container.appendChild(slot);
            });
        }

        function selectTime(time) {
            selectedTime = time;
            document.querySelectorAll('.time-slot').forEach(slot => {
                slot.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        function createBooking() {
            if (!selectedService || !selectedDate || !selectedTime) {
                alert('Por favor, selecione o servi√ßo, data e hor√°rio!');
                return;
            }

            const service = DB.services.find(s => s.id === selectedService);
            const notes = document.getElementById('bookingNotes').value;

            const appointment = {
                id: DB.appointments.length + 1,
                clientId: DB.currentUser.id,
                clientName: DB.currentUser.name,
                serviceId: selectedService,
                serviceName: service.name,
                price: service.price,
                date: selectedDate,
                time: selectedTime,
                notes: notes,
                status: 'pending',
                createdAt: new Date().toISOString()
            };

            DB.appointments.push(appointment);
            DB.save();

            alert('Agendamento realizado com sucesso!');
            
            // Reset form
            selectedService = null;
            selectedDate = null;
            selectedTime = null;
            document.getElementById('bookingNotes').value = '';
            document.querySelectorAll('.service-card').forEach(card => card.classList.remove('selected'));
            document.querySelectorAll('.time-slot').forEach(slot => slot.classList.remove('selected'));
            
            showClientTab('appointments');
        }

        function loadClientAppointments() {
            const tbody = document.querySelector('#clientAppointmentsTable tbody');
            tbody.innerHTML = '';

            const userAppointments = DB.appointments
                .filter(apt => apt.clientId === DB.currentUser.id)
                .sort((a, b) => new Date(b.date) - new Date(a.date));

            if (userAppointments.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 40px;">Voc√™ ainda n√£o tem agendamentos</td></tr>';
                return;
            }

            userAppointments.forEach(apt => {
                const row = document.createElement('tr');
                const canCancel = apt.status === 'pending' && new Date(apt.date + ' ' + apt.time) > new Date();
                const canRate = apt.status === 'completed' && !DB.ratings.find(r => r.appointmentId === apt.id);
                const hasRating = DB.ratings.find(r => r.appointmentId === apt.id);
                
                row.innerHTML = `
                    <td>${new Date(apt.date).toLocaleDateString('pt-BR')}</td>
                    <td>${apt.time}</td>
                    <td>${apt.serviceName}</td>
                    <td><span class="status status-${apt.status}">${getStatusText(apt.status)}</span></td>
                    <td>
                        <div class="action-buttons">
                            ${canCancel ? `<button class="btn btn-danger btn-small" onclick="cancelAppointment(${apt.id})">Cancelar</button>` : ''}
                            ${canRate ? `<button class="btn btn-warning btn-small" onclick="openRatingModalForClient(${apt.id})">‚≠ê Avaliar</button>` : ''}
                            ${hasRating ? `<button class="btn btn-info btn-small" onclick="showAppointmentRating(${apt.id})">Ver Avalia√ß√£o</button>` : ''}
                            ${!canCancel && !canRate && !hasRating ? '-' : ''}
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function cancelAppointment(id) {
            if (confirm('Deseja realmente cancelar este agendamento?')) {
                const appointment = DB.appointments.find(apt => apt.id === id);
                appointment.status = 'cancelled';
                DB.save();
                loadClientAppointments();
            }
        }

        // Admin Dashboard
        function showAdminDashboard() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('registerScreen').classList.add('hidden');
            document.getElementById('clientDashboard').classList.add('hidden');
            document.getElementById('adminDashboard').classList.remove('hidden');
            document.getElementById('adminName').textContent = DB.currentUser.name;
            
            updateAdminStats();
            loadAdminAppointments();
            
            // Atualizar badge de avalia√ß√µes
            document.getElementById('ratingsCount').textContent = DB.ratings.length;
        }

        function showAdminTab(tab) {
            const tabs = document.querySelectorAll('#adminDashboard .tab');
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            document.getElementById('adminAppointmentsTab').classList.add('hidden');
            document.getElementById('adminClientsTab').classList.add('hidden');
            document.getElementById('adminServicesTab').classList.add('hidden');
            document.getElementById('adminRatingsTab').classList.add('hidden');
            document.getElementById('adminSettingsTab').classList.add('hidden');

            if (tab === 'appointments') {
                document.getElementById('adminAppointmentsTab').classList.remove('hidden');
                loadAdminAppointments();
            } else if (tab === 'clients') {
                document.getElementById('adminClientsTab').classList.remove('hidden');
                loadAdminClients();
            } else if (tab === 'services') {
                document.getElementById('adminServicesTab').classList.remove('hidden');
                loadAdminServices();
            } else if (tab === 'ratings') {
                document.getElementById('adminRatingsTab').classList.remove('hidden');
                loadAdminRatings();
            } else if (tab === 'settings') {
                document.getElementById('adminSettingsTab').classList.remove('hidden');
                loadAdminSettings();
            }
        }

        function updateAdminStats() {
            const clients = DB.users.filter(u => u.role === 'client');
            const today = new Date().toISOString().split('T')[0];
            const todayApts = DB.appointments.filter(apt => apt.date === today);
            const pending = DB.appointments.filter(apt => apt.status === 'pending');
            
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthRevenue = DB.appointments
                .filter(apt => {
                    const aptDate = new Date(apt.date);
                    return aptDate.getMonth() === currentMonth && 
                           aptDate.getFullYear() === currentYear &&
                           apt.status === 'completed';
                })
                .reduce((sum, apt) => sum + apt.price, 0);

            document.getElementById('totalClients').textContent = clients.length;
            document.getElementById('todayAppointments').textContent = todayApts.length;
            document.getElementById('pendingAppointments').textContent = pending.length;
            document.getElementById('totalRevenue').textContent = `R$ ${monthRevenue.toFixed(2)}`;
        }

        function loadAdminAppointments() {
            const tbody = document.querySelector('#adminAppointmentsTable tbody');
            tbody.innerHTML = '';

            const appointments = DB.appointments.sort((a, b) => new Date(b.date + ' ' + b.time) - new Date(a.date + ' ' + a.time));

            if (appointments.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; padding: 40px;">Nenhum agendamento encontrado</td></tr>';
                return;
            }

            appointments.forEach(apt => {
                const rating = DB.ratings.find(r => r.appointmentId === apt.id);
                const ratingStars = rating ? '‚≠ê'.repeat(rating.rating) : '-';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>#${apt.id}</td>
                    <td>${apt.clientName}</td>
                    <td>${new Date(apt.date).toLocaleDateString('pt-BR')}</td>
                    <td>${apt.time}</td>
                    <td>${apt.serviceName}</td>
                    <td>R$ ${apt.price.toFixed(2)}</td>
                    <td>
                        <span class="status status-${apt.status}">${getStatusText(apt.status)}</span>
                        ${apt.paymentMethod ? `<br><small style="color: rgba(255,255,255,0.6);">${getPaymentMethodText(apt.paymentMethod)}</small>` : ''}
                    </td>
                    <td>${ratingStars}</td>
                    <td>
                        <div class="action-buttons">
                            ${apt.status === 'pending' ? `<button class="btn btn-success btn-small" onclick="confirmAppointment(${apt.id})">Confirmar</button>` : ''}
                            ${apt.status === 'confirmed' ? `<button class="btn btn-warning btn-small" onclick="completeAppointment(${apt.id})">Concluir</button>` : ''}
                            ${apt.status !== 'cancelled' && apt.status !== 'completed' ? `<button class="btn btn-danger btn-small" onclick="adminCancelAppointment(${apt.id})">Cancelar</button>` : ''}
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function confirmAppointment(id) {
            const appointment = DB.appointments.find(apt => apt.id === id);
            appointment.status = 'confirmed';
            DB.save();
            loadAdminAppointments();
            updateAdminStats();
        }

        function completeAppointment(id) {
            currentAppointmentForPayment = DB.appointments.find(apt => apt.id === id);
            
            if (!currentAppointmentForPayment) return;
            
            // Preencher informa√ß√µes no modal
            document.getElementById('paymentClientName').textContent = currentAppointmentForPayment.clientName;
            document.getElementById('paymentServiceName').textContent = currentAppointmentForPayment.serviceName;
            document.getElementById('paymentValue').textContent = currentAppointmentForPayment.price.toFixed(2);
            
            // Resetar sele√ß√£o
            selectedPaymentMethod = null;
            document.querySelectorAll('.payment-method').forEach(pm => pm.classList.remove('selected'));
            
            // Abrir modal
            document.getElementById('paymentModal').classList.add('active');
        }

        function adminCancelAppointment(id) {
            if (confirm('Deseja realmente cancelar este agendamento?')) {
                const appointment = DB.appointments.find(apt => apt.id === id);
                appointment.status = 'cancelled';
                DB.save();
                loadAdminAppointments();
                updateAdminStats();
            }
        }

        function loadAdminClients() {
            const tbody = document.querySelector('#adminClientsTable tbody');
            tbody.innerHTML = '';

            const clients = DB.users.filter(u => u.role === 'client');

            if (clients.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 40px;">Nenhum cliente cadastrado</td></tr>';
                return;
            }

            clients.forEach(client => {
                const clientAppointments = DB.appointments.filter(apt => apt.clientId === client.id);
                const lastVisit = clientAppointments.length > 0 
                    ? new Date(Math.max(...clientAppointments.map(apt => new Date(apt.date)))).toLocaleDateString('pt-BR')
                    : 'Nunca';

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${client.name}</td>
                    <td>${client.email}</td>
                    <td>${client.phone}</td>
                    <td>${clientAppointments.length}</td>
                    <td>${lastVisit}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function loadAdminServices() {
            const tbody = document.querySelector('#adminServicesTable tbody');
            tbody.innerHTML = '';

            DB.services.forEach(service => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${service.name}</td>
                    <td>${service.duration} min</td>
                    <td>R$ ${service.price.toFixed(2)}</td>
                    <td>
                        <button class="btn btn-danger btn-small" onclick="deleteService(${service.id})">Excluir</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function loadAdminRatings() {
            const container = document.getElementById('ratingsContainer');
            container.innerHTML = '';

            const ratings = DB.ratings.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

            if (ratings.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">‚≠ê</div>
                        <p>Nenhuma avalia√ß√£o recebida ainda</p>
                    </div>
                `;
                return;
            }

            // Calcular m√©dia
            const avgRating = (ratings.reduce((sum, r) => sum + r.rating, 0) / ratings.length).toFixed(1);
            
            container.innerHTML = `
                <div style="background: rgba(243, 156, 18, 0.1); padding: 25px; border-radius: 15px; margin-bottom: 25px; text-align: center; border: 2px solid rgba(243, 156, 18, 0.3);">
                    <div style="font-size: 48px; margin-bottom: 10px;">‚≠ê</div>
                    <div style="font-size: 42px; font-weight: 800; color: #f39c12; margin-bottom: 5px;">${avgRating}</div>
                    <div style="color: rgba(255,255,255,0.7);">M√©dia de ${ratings.length} avalia√ß√µes</div>
                    <div style="margin-top: 15px; display: flex; justify-content: center; gap: 15px;">
                        ${[5,4,3,2,1].map(star => {
                            const count = ratings.filter(r => r.rating === star).length;
                            const percent = ((count / ratings.length) * 100).toFixed(0);
                            return `
                                <div style="text-align: center;">
                                    <div style="font-size: 18px; color: #f39c12;">${star}‚≠ê</div>
                                    <div style="font-size: 24px; font-weight: 700;">${count}</div>
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.5);">${percent}%</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;

            ratings.forEach(rating => {
                const reviewCard = document.createElement('div');
                reviewCard.className = 'review-display';
                reviewCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <div>
                            <div style="font-weight: 700; font-size: 16px; margin-bottom: 5px;">${rating.clientName}</div>
                            <div class="review-stars">${'‚≠ê'.repeat(rating.rating)}</div>
                        </div>
                        <div class="review-date">${new Date(rating.createdAt).toLocaleDateString('pt-BR')}</div>
                    </div>
                    ${rating.comment ? `<div class="review-comment">"${rating.comment}"</div>` : '<div class="review-comment" style="opacity: 0.5;">Sem coment√°rio</div>'}
                `;
                container.appendChild(reviewCard);
            });

            // Atualizar badge
            document.getElementById('ratingsCount').textContent = ratings.length;
        }

        function showAddServiceModal() {
            document.getElementById('serviceModal').classList.add('active');
        }

        function closeServiceModal() {
            document.getElementById('serviceModal').classList.remove('active');
            document.getElementById('serviceName').value = '';
            document.getElementById('serviceDuration').value = '';
            document.getElementById('servicePrice').value = '';
        }

        function addService() {
            const name = document.getElementById('serviceName').value;
            const duration = parseInt(document.getElementById('serviceDuration').value);
            const price = parseFloat(document.getElementById('servicePrice').value);

            if (!name || !duration || !price) {
                alert('Preencha todos os campos!');
                return;
            }

            const newService = {
                id: DB.services.length + 1,
                name,
                duration,
                price
            };

            DB.services.push(newService);
            DB.save();

            closeServiceModal();
            loadAdminServices();
        }

        function deleteService(id) {
            if (confirm('Deseja realmente excluir este servi√ßo?')) {
                DB.services = DB.services.filter(s => s.id !== id);
                DB.save();
                loadAdminServices();
            }
        }

        function getStatusText(status) {
            const statusMap = {
                pending: 'Pendente',
                confirmed: 'Confirmado',
                cancelled: 'Cancelado',
                completed: 'Conclu√≠do'
            };
            return statusMap[status] || status;
        }

        // Payment Modal Functions
        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            document.querySelectorAll('.payment-method').forEach(pm => {
                pm.classList.remove('selected');
            });
            document.querySelector(`[data-method="${method}"]`).classList.add('selected');
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('active');
            selectedPaymentMethod = null;
            currentAppointmentForPayment = null;
        }

        function completePayment() {
            if (!selectedPaymentMethod) {
                alert('Por favor, selecione uma forma de pagamento!');
                return;
            }

            if (!currentAppointmentForPayment) return;

            // Atualizar appointment
            currentAppointmentForPayment.status = 'completed';
            currentAppointmentForPayment.paymentMethod = selectedPaymentMethod;
            currentAppointmentForPayment.completedAt = new Date().toISOString();
            
            DB.save();
            
            closePaymentModal();
            
            // Mostrar notifica√ß√£o de sucesso
            alert(`Atendimento finalizado com sucesso!\nPagamento: ${getPaymentMethodText(selectedPaymentMethod)}`);
            
            loadAdminAppointments();
            updateAdminStats();

            // Perguntar se quer solicitar avalia√ß√£o
            if (confirm('Deseja solicitar uma avalia√ß√£o do cliente?')) {
                currentAppointmentForRating = currentAppointmentForPayment;
                openRatingModal();
            }
        }

        function getPaymentMethodText(method) {
            const methodMap = {
                dinheiro: 'Dinheiro',
                pix: 'PIX',
                debito: 'Cart√£o de D√©bito',
                credito: 'Cart√£o de Cr√©dito'
            };
            return methodMap[method] || method;
        }

        // Rating Modal Functions
        function openRatingModal() {
            selectedRating = 0;
            document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
            document.getElementById('ratingComment').value = '';
            document.getElementById('ratingModal').classList.add('active');
        }

        function closeRatingModal() {
            document.getElementById('ratingModal').classList.remove('active');
            selectedRating = 0;
            currentAppointmentForRating = null;
        }

        function selectRating(rating) {
            selectedRating = rating;
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function submitRating() {
            if (selectedRating === 0) {
                alert('Por favor, selecione uma avalia√ß√£o!');
                return;
            }

            const comment = document.getElementById('ratingComment').value;

            const rating = {
                id: DB.ratings.length + 1,
                appointmentId: currentAppointmentForRating.id,
                clientId: currentAppointmentForRating.clientId,
                clientName: currentAppointmentForRating.clientName,
                rating: selectedRating,
                comment: comment,
                createdAt: new Date().toISOString()
            };

            DB.ratings.push(rating);
            DB.save();

            closeRatingModal();
            alert('Obrigado pela avalia√ß√£o! ‚≠ê');
        }

        function skipRating() {
            if (confirm('Tem certeza que deseja pular a avalia√ß√£o?')) {
                closeRatingModal();
            }
        }

        // Show rating in appointments (for clients)
        function showAppointmentRating(appointmentId) {
            const rating = DB.ratings.find(r => r.appointmentId === appointmentId);
            if (!rating) {
                openRatingModalForClient(appointmentId);
            } else {
                alert(`Sua avalia√ß√£o: ${rating.rating} estrelas\n${rating.comment || 'Sem coment√°rio'}`);
            }
        }

        function openRatingModalForClient(appointmentId) {
            const appointment = DB.appointments.find(a => a.id === appointmentId);
            currentAppointmentForRating = appointment;
            openRatingModal();
        }

        // Admin Settings Functions
        function loadAdminSettings() {
            // Carregar hor√°rios dispon√≠veis
            const times = DB.settings?.availableTimes || [];
            document.getElementById('availableTimes').value = times.join(', ');

            // Carregar configura√ß√µes gerais
            document.getElementById('barbershopName').value = DB.settings?.barbershopName || '';
            document.getElementById('barbershopPhone').value = DB.settings?.phone || '';
            document.getElementById('barbershopEmail').value = DB.settings?.email || '';
            document.getElementById('barbershopAddress').value = DB.settings?.address || '';

            // Carregar datas bloqueadas
            loadBlockedDates();

            // Definir data m√≠nima para bloqueio
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('blockedDate').min = today;
        }

        function saveAvailableTimes() {
            const timesInput = document.getElementById('availableTimes').value;
            const times = timesInput.split(',').map(t => t.trim()).filter(t => t);

            // Validar formato de hor√°rio
            const timeRegex = /^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/;
            const invalidTimes = times.filter(t => !timeRegex.test(t));

            if (invalidTimes.length > 0) {
                alert(`Hor√°rios inv√°lidos: ${invalidTimes.join(', ')}\nUse o formato HH:MM (ex: 09:00)`);
                return;
            }

            if (times.length === 0) {
                alert('Adicione pelo menos um hor√°rio!');
                return;
            }

            // Ordenar hor√°rios
            times.sort();

            DB.settings.availableTimes = times;
            DB.save();

            alert('Hor√°rios salvos com sucesso! ‚úÖ');
        }

        function addBlockedDate() {
            const dateInput = document.getElementById('blockedDate').value;

            if (!dateInput) {
                alert('Selecione uma data!');
                return;
            }

            // Verificar se j√° est√° bloqueada
            if (DB.blockedDates.includes(dateInput)) {
                alert('Esta data j√° est√° bloqueada!');
                return;
            }

            // Verificar se h√° agendamentos nesta data
            const hasAppointments = DB.appointments.some(apt => 
                apt.date === dateInput && 
                (apt.status === 'pending' || apt.status === 'confirmed')
            );

            if (hasAppointments) {
                if (!confirm('Existem agendamentos nesta data. Deseja bloque√°-la mesmo assim? Os agendamentos n√£o ser√£o cancelados automaticamente.')) {
                    return;
                }
            }

            DB.blockedDates.push(dateInput);
            DB.blockedDates.sort();
            DB.save();

            document.getElementById('blockedDate').value = '';
            loadBlockedDates();
            alert('Data bloqueada com sucesso! üö´');
        }

        function loadBlockedDates() {
            const container = document.getElementById('blockedDatesContainer');
            container.innerHTML = '';

            if (DB.blockedDates.length === 0) {
                container.innerHTML = '<div class="empty-blocked-dates">Nenhuma data bloqueada</div>';
                return;
            }

            DB.blockedDates.forEach(date => {
                const item = document.createElement('div');
                item.className = 'blocked-date-item';
                item.innerHTML = `
                    <div class="blocked-date-text">üìÖ ${new Date(date + 'T00:00:00').toLocaleDateString('pt-BR', { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    })}</div>
                    <button class="btn btn-danger btn-small" onclick="removeBlockedDate('${date}')">Desbloquear</button>
                `;
                container.appendChild(item);
            });
        }

        function removeBlockedDate(date) {
            if (confirm('Deseja desbloquear esta data?')) {
                DB.blockedDates = DB.blockedDates.filter(d => d !== date);
                DB.save();
                loadBlockedDates();
                alert('Data desbloqueada! ‚úÖ');
            }
        }

        function saveGeneralSettings() {
            const name = document.getElementById('barbershopName').value;
            const phone = document.getElementById('barbershopPhone').value;
            const email = document.getElementById('barbershopEmail').value;
            const address = document.getElementById('barbershopAddress').value;

            if (!name || !phone || !email || !address) {
                alert('Preencha todos os campos!');
                return;
            }

            DB.settings.barbershopName = name;
            DB.settings.phone = phone;
            DB.settings.email = email;
            DB.settings.address = address;
            DB.save();

            // Atualizar footer
            updateFooter();

            alert('Configura√ß√µes salvas com sucesso! ‚úÖ');
        }

        function updateFooter() {
            const settings = DB.settings;
            if (!settings) return;

            // Atualizar informa√ß√µes no footer (se necess√°rio)
            // Pode ser expandido conforme necess√°rio
        }
    </script>
</body>
</html>